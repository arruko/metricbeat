- module: postgresql
  period: 10s
  enabled: true
  metricsets:
    # Stats about every PostgreSQL database
    - database
    # Stats about the background writer process's activity
    - bgwriter
    # Stats about every PostgreSQL process
    - activity

  # The host must be passed as PostgreSQL URL. Example:
  # postgres://localhost:5432?sslmode=disable
  # The available parameters are documented here:
  # https://godoc.org/github.com/lib/pq#hdr-Connection_String_Parameters
  hosts: ["postgres://{{ ansible_host | default('localhost') }}:{{ metricbeat_psql_port | default(5432) }}"]

  # Username to use when connecting to PostgreSQL. Empty by default.
  username: {{ metricbeat_psql_username }}

  # Password to use when connecting to PostgreSQL. Empty by default.
  password: {{ metricbeat_psql_password }}
